---
title: "Lab 11"
author: 'Blue Team: Matt Lawson,'
date: "4/5/2019"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse); library(babynames); library(forcats); library(stringr)
```

# About `babynames` package
  - Baby name data provided by the SSA (Social Security Administration)
  - Includes names with at least 5 uses
  - Includes year, sex, name, number of occurances, and prop
      - Prop = proportion of people of that sex with that name born in that year

```{r, include=F}
head(babynames, 2)
```

## Individual plots of your nameâ€™s popularity over time

```{r}
startWithMat <- filter(babynames, str_detect(babynames$name, "^Mat")) %>% group_by(year) %>% 
  summarize(sumprop = sum(prop))

Matt <- babynames %>% 
  filter(str_detect(name, paste(c( "^Matthew$", "^Mathew$", "^Mat$", "^Matt$"),collapse = '|'))) %>%
  group_by(year) %>% 
  summarize(sumprop = sum(prop))

ggplot() + 
  geom_line(data=startWithMat, mapping=aes(x=year, y=sumprop, color="Starts with 'Mat'"), size=1.25) + 
  geom_line(data=Matt, mapping=aes(x=year, y=sumprop, color="Matt/Matthew"), size=1.25) + 
  labs(x="year", y="Proportion", title="Start with 'Mat' vs. name is 'Matt/Matthew' (or a common spelling)" , color="Type")

nameNowBorn <- Matt %>% filter(year==1998 | year==2017)
startNowBorn <- startWithMat %>% filter(year==2017)


nameDif <- as.numeric(nameNowBorn[2,2] - nameNowBorn[1,2])
nowDif <- as.numeric(nameNowBorn[2,2] / startNowBorn[1,2] )

nameDif*100
nowDif*100
```

My name has dropped in percentage of total names by 0.99% since I was born until now. My name makes up 0.3
My name makes up 44.7% of the names that start with the first three letters.





## Ariel and Rachel regexs

```{r}
ariel <- filter(babynames, str_detect(babynames$name, "Ar[iy]+.l+[^a]?$")) %>%
  filter(year==1973 | year==1988 | year==1990) %>%
  group_by(year, name) %>% summarize(count = sum(n), sumprop = sum(prop))

ariel1973 <- ariel %>% filter(year==1973) %>% nrow()
ariel1988 <- ariel %>% filter(year==1988) %>% nrow()
ariel1990 <- ariel %>% filter(year==1990) %>% nrow()
#############################################################################################################
rachel <- filter(babynames, str_detect(babynames$name, "Ra[ey]?ch.*l")) %>%
  filter(year==1973 | year==1988 | year==1990) %>%
  group_by(year, name) %>% summarize(count = sum(n), sumprop = sum(prop))

rachel1973 <- rachel %>% filter(year==1973) %>% nrow()
rachel1988 <- rachel %>% filter(year==1988) %>% nrow()
rachel1990 <- rachel %>% filter(year==1990) %>% nrow()


arielRachel <- tribble(
  ~Name, ~Year, ~`Unique Spellings`,
  "Ariel", 1973, ariel1973,
  "Ariel", 1988, ariel1988,
  "Ariel", 1990, ariel1990,
  "Rachel", 1973, rachel1973,
  "Rachel", 1988, rachel1988,
  "Rachel", 1990, rachel1990
)
```
<br> </br>
__Number of different ways to spell [Ariel, Rachel] for different years__

```{r, echo=F}
arielRachel
```

<br> </br>
<br> </br>

```{r}
ariel <- filter(babynames, str_detect(babynames$name, "Ar[iy]+.l+[^a]?$")) %>%
  filter(sex=="F" & (year==1973 | year==1988 | year==1990 | year==2017)) %>%
  group_by(year) %>% summarize(count = sum(n), sumprop = sum(prop)) %>% mutate(name="Ariel")

rachel <- filter(babynames, str_detect(babynames$name, "Ra[ey]?ch.*l")) %>%
  filter(sex=="F" & (year==1973 | year==1988 | year==1990 | year==2017)) %>%
 group_by(year) %>% summarize(count = sum(n), sumprop = sum(prop)) %>% mutate(name="Rachel")



total <- ariel %>% rbind(rachel) %>% arrange(year)  %>% group_by(year) %>% summarize(totalProp = sum(sumprop))
names(total)[2] <- "Chance"
```
<br> </br>
__Chances a girl would be named either Rachel or Ariel (Including different spellings) for the given year__

```{r, echo=F}
total
```





## The _Little Mermaid_ Effect






## Your names

```{r}
Matt <- babynames %>% filter(year<=2017 & year>=1979) %>% 
  filter(str_detect(name, paste(c( "^Matthew$", "^Mathew$", "^Mat$", "^Matt$"),collapse = '|'))) %>%
  group_by(year) %>%
  summarize( name = "Matthew", totalProp = sum(prop))
mattBirthYear <- subset(Matt, year == 1998)
ggplot() + 
  geom_line(data = Matt, mapping=aes(x=year, y=totalProp), color="orange") +
  geom_point(dat=mattBirthYear, mapping=aes(x=year, y=totalProp), color="red", size=3) + 
  labs(title="Number of babies named 'Matt' from 1979-2017", y="Proportion", caption="My birth year (1998) in red.")

```



## Who Did What

__Matt__

  - Created and setup the team markdown file
  - Created the template for the name popularity over time
  - Completed the Ariel and Rachel Regex section
  - Created the template for the first plot of the names section

<br></br>
<br></br>


__Brandon__

<br></br>
<br></br>



__Bing__

Bing put in what part of the lab you did

<br></br>
<br></br>


__Nick__

Nick put in what part of the lab you did

<br></br>
<br></br>